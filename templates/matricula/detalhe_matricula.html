{% extends "core/base.html" %}
{% block title %}Detalhes da Matrícula - SmartSecretaria{% endblock %}

{% block content %}
<div class="container">
  <h1>Detalhes da Matrícula</h1>
  
  {% if messages %}
    <div class="mensagens">
      {% for message in messages %}
        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
  
  <div class="card">
    <div class="card-header">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3>Matrícula de {{ matricula.aluno.nome_completo }}</h3>
        <div>
          <a href="{% url 'matricula:editar_matricula' matricula.id %}">Editar</a>
          <a href="{% url 'matricula:excluir_matricula' matricula.id %}">Excluir</a>
        </div>
      </div>
    </div>
    <div class="card-body">
      <dl>
        <dt>Aluno:</dt>
        <dd><a href="{% url 'aluno:detalhe_aluno' matricula.aluno.id %}">{{ matricula.aluno.nome_completo }}</a></dd>
        
        <dt>Turma:</dt>
        <dd><a href="{% url 'turma:detalhe_turma' matricula.turma.id %}">{{ matricula.turma.nome }}</a></dd>
        
        <dt>Data de Matrícula:</dt>
        <dd>{{ matricula.data_matricula }}</dd>
        
        <dt>Ano Letivo:</dt>
        <dd>{{ matricula.ano_letivo }}</dd>
        
        <dt>Status:</dt>
        <dd>
          {% if matricula.status == 'ativo' %}
            <span style="color: green;">Ativo</span>
          {% elif matricula.status == 'pendente' %}
            <span style="color: orange;">Pendente</span>
          {% elif matricula.status == 'cancelado' %}
            <span style="color: red;">Cancelado</span>
          {% elif matricula.status == 'transferido' %}
            <span style="color: blue;">Transferido</span>
          {% endif %}
        </dd>
      </dl>
      
      <div class="status-actions" style="margin-top: 20px;">
        <h4>Alterar Status</h4>
        {% if matricula.status != 'ativo' %}
          <a href="{% url 'matricula:mudar_status_matricula' matricula.id 'ativo' %}">Marcar como Ativo</a>
        {% endif %}
        
        {% if matricula.status != 'pendente' %}
          <a href="{% url 'matricula:mudar_status_matricula' matricula.id 'pendente' %}">Marcar como Pendente</a>
        {% endif %}
        
        {% if matricula.status != 'cancelado' %}
          <a href="{% url 'matricula:mudar_status_matricula' matricula.id 'cancelado' %}">Marcar como Cancelado</a>
        {% endif %}
        
        {% if matricula.status != 'transferido' %}
          <a href="{% url 'matricula:mudar_status_matricula' matricula.id 'transferido' %}">Marcar como Transferido</a>
        {% endif %}
      </div>
    </div>
    <div class="card-footer">
      <a href="{% url 'matricula:lista_matriculas' %}">Voltar para a lista</a>
    </div>
  </div>
</div>
{% endblock %}